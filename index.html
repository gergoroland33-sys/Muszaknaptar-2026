<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Műszaknaptár 2026</title>
<style>
body { font-family: Arial, sans-serif; margin:10px; background:#f7f7f7; }
h2 { text-align:center; margin-bottom:10px; }
select { width:100%; padding:5px; margin:5px 0; font-size:16px; }
.card { background:white; margin:5px 0; padding:10px; border-radius:6px; box-shadow:0 1px 3px rgba(0,0,0,0.15);}
.muszak-A { background:#2196F3; color:white; }
.muszak-B { background:#4CAF50; color:white; }
.muszak-C { background:#FFC107; color:black; }
.muszak-D { background:#FF5722; color:white; }
.highlight { border:2px solid red; }
</style>
</head>
<body>

<h2>Műszaknaptár 2026</h2>

<label>Hónap:</label>
<select id="honap">
<option value="mind">Mind</option>
<option value="01">Január</option>
<option value="02">Február</option>
<option value="03">Március</option>
<option value="04">Április</option>
<option value="05">Május</option>
<option value="06">Június</option>
<option value="07">Július</option>
<option value="08">Augusztus</option>
<option value="09">Szeptember</option>
<option value="10">Október</option>
<option value="11">November</option>
<option value="12">December</option>
</select>

<label>Műszak:</label>
<select id="muszak">
<option value="mind">Mind</option>
<option value="A">A</option>
<option value="B">B</option>
<option value="C">C</option>
<option value="D">D</option>
</select>

<div id="eredmeny">Adatok betöltése…</div>

<script>
let muszakok = [];

// CSV betöltése
fetch('muszakok.csv')
.then(r => r.text())
.then(text => {
muszakok = text.split('\n').slice(1).map(s=>{
const cols = s.split(';');
let napiAdatok = [];
for(let i=1;i<cols.length;i+=4){
if(cols[i] && cols[i+2]){
napiAdatok.push({
datum: cols[0].replace(/\./g,'-').trim(), // 2026.01.01 -> 2026-01-01
nev: cols[i].trim(),
muszak: cols[i+2].trim().toUpperCase()
});
}
}
return napiAdatok;
}).flat();
showData();
});

// Megjelenítés
function showData() {
const honapValaszt = document.getElementById('honap').value;
const muszakValaszt = document.getElementById('muszak').value;

let html = '';
const today = new Date();
const todayStr = today.toISOString().split('T')[0]; // YYYY-MM-DD

let talalatok = muszakok;

// Hónap szűrés
if(honapValaszt!=='mind'){
talalatok = talalatok.filter(r => r.datum.slice(5,7)===honapValaszt);
}

// Műszak szűrés (kis- és nagybetűtől független)
if(muszakValaszt!=='mind'){
talalatok = talalatok.filter(r => r.muszak.toUpperCase()===muszakValaszt.toUpperCase());
}

if(talalatok.length===0){
html='<div class="card">Nincs adat a kiválasztott szűrésre</div>';
} else {
talalatok.forEach(r=>{
const highlight = r.datum===todayStr ? 'highlight' : '';
html += `<div class="card muszak-${r.muszak} ${highlight}">
<strong>${r.nev}</strong> – ${r.muszak} műszak – ${r.datum}
</div>`;
});
}

document.getElementById('eredmeny').innerHTML = html;

// Automatikus görgetés az aktuális naphoz
const kiemelt = document.querySelector('.highlight');
if(kiemelt){
kiemelt.scrollIntoView({behavior:'smooth', block:'center'});
}
}

// Szűrés változáskor
document.getElementById('honap').addEventListener('change', showData);
document.getElementById('muszak').addEventListener('change', showData);
</script>

</body>
</html>
